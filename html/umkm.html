<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css" integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="../css/umkm.css">
    <title>Website Resmi Desa Gununghalu</title>
</head>
<body>
    <nav>
        <div class="navbar">
            <div class="logo">
                <img src="../foto/logo_desa.png" alt="logo kabupaten bandung barat">
                <div class="title">
                    <h1>Desa Gununghalu</h1>
                    <p>Kabupaten Bandung Barat</p>    
                </div>
            </div>
            <ul class="links">
                <li class="nav-links"><a href="index.html">Beranda</a></li>
                <li class="nav-links"><a href="profil.html">Profil Desa</a></li>
                <li class="nav-links"><a href="berita.html">Berita</a></li>
                <li class="nav-links"><a href="potensi.html">Potensi</a></li>
                <li class="nav-links"><a href="statistik.html">Statistik</a></li>
                <li class="nav-links active"><a href="umkm.html">UMKM</a></li>
            </ul>
            <div class="toggle_btn">
                <i class="fa-solid fa-bars"></i>
            </div>
        </div>

        <div class="drop_menu">
            <li><a href="index.html">Beranda</a></li>
            <li><a href="profil.html">Profil Desa</a></li>
            <li><a href="berita.html">Berita</a></li>
            <li><a href="potensi.html">Potensi</a></li>
            <li><a href="statistik.html">Statistik</a></li>
            <li><a href="umkm.html">UMKM</a></li>
        </div>
    </nav>

    <main>
        <div class="umkm">
            <div class="umkm-title">
                <h2>Produk UMKM Desa</h2>
                <p>Dukung produk lokal desa untuk ekonomi yang lebih baik</p>
            </div>
            <div class="umkm-container">
                <a href="../html/detail_umkm.html?id=1" class="umkm-item">
                    <img src="../foto/umkm/umkm.jpg" alt="Produk UMKM 1">
                    <div class="caption">
                        <h3>Nama Produk UMKM</h3>
                        <p-1>Rp 15.000</p-1>
                        <p>Deskripsi singkat tentang produk UMKM yang
                         menarik dan informatif.</p>
                    </div>
                </a>
                <a href="../html/detail_umkm.html?id=2" class="umkm-item">
                    <img src="../foto/umkm/umkm.jpg" alt="Produk UMKM 2">
                    <div class="caption">
                        <h3>Nama Produk UMKM</h3>
                        <p-1>Rp 15.000</p-1>
                        <p>Deskripsi singkat tentang produk UMKM yang menarik dan informatif.</p>    
                    </div>
                </a>
                <a href="../html/detail_umkm.html?id=3" class="umkm-item">
                    <img src="../foto/umkm/umkm.jpg" alt="Produk UMKM 3">
                    <div class="caption">
                        <h3>Nama Produk UMKM</h3>
                        <p-1>Rp 15.000</p-1>
                        <p>Deskripsi singkat tentang produk UMKM yang menarik dan informatif.</p>    
                    </div>
                </a>
                <a href="../html/detail_umkm.html" class="umkm-item">
                    <img src="../foto/umkm/umkm.jpg" alt="Produk UMKM 3">
                    <div class="caption">
                        <h3>Nama Produk UMKM</h3>
                        <p-1>Rp 15.000</p-1>
                        <p>Deskripsi singkat tentang produk UMKM yang menarik dan informatif.</p>    
                    </div>
                </a>
                <a href="../html/detail_umkm.html" class="umkm-item">
                    <img src="../foto/umkm/umkm.jpg" alt="Produk UMKM 3">
                    <div class="caption">
                        <h3>Nama Produk UMKM</h3>
                        <p-1>Rp 15.000</p-1>
                        <p>Deskripsi singkat tentang produk UMKM yang menarik dan informatif.</p>    
                    </div>
                </a>
                <a href="../html/detail_umkm.html" class="umkm-item">
                    <img src="../foto/umkm/umkm.jpg" alt="Produk UMKM 3">
                    <div class="caption">
                        <h3>Nama Produk UMKM</h3>
                        <p-1>Rp 15.000</p-1>
                        <p>Deskripsi singkat tentang produk UMKM yang menarik dan informatif.</p>    
                    </div>
                </a>
                <a href="../html/detail_umkm.html" class="umkm-item">
                    <img src="../foto/umkm/umkm.jpg" alt="Produk UMKM 3">
                    <div class="caption">
                        <h3>Nama Produk UMKM</h3>
                        <p-1>Rp 15.000</p-1>
                        <p>Deskripsi singkat tentang produk UMKM yang menarik dan informatif.</p>    
                    </div>
                </a>
                <a href="../html/detail_umkm.html" class="umkm-item">
                    <img src="../foto/umkm/umkm.jpg" alt="Produk UMKM 3">
                    <div class="caption">
                        <h3>Nama Produk UMKM</h3>
                        <p-1>Rp 15.000</p-1>
                        <p>Deskripsi singkat tentang produk UMKM yang menarik dan informatif.</p>    
                    </div>
                </a>
            </div>
        </div>

        <!-- PENGADUAN -->
        <div class="floating-area">
            <button class="pengaduan-btn" onclick="togglePengaduan()">
                <i class="fa-solid fa-headset"></i> Pengaduan
            </button>
        </div>
    
        <div id="popupPengaduan" class="popup-card">
            <div class="popup-header">
                <h3>Form Pengaduan</h3>
                <span class="close-popup" onclick="togglePengaduan()">&times;</span>
            </div>
            
            <form id="formFloating">
                <div class="form-group-sm">
                    <label>Nama <span class="req">*</span></label>
                    <input type="text" id="popNama" placeholder="Masukkan nama Anda" required>
                </div>
    
                <div class="form-group-sm">
                    <label>Nomor Telepon/WA <span class="req">*</span></label>
                    <input type="number" id="popWa" placeholder="Nomor WA aktif" required>
                </div>
    
                <div class="form-group-sm">
                    <label>Kategori <span class="req">*</span></label>
                    <div class="select-wrap-sm">
                        <select id="popKategori" required>
                            <option value="" disabled selected>Pilih kategori...</option>
                            <option value="Administrasi">Administrasi</option>
                            <option value="Infrastruktur">Infrastruktur</option>
                            <option value="Keamanan">Keamanan</option>
                            <option value="Lainnya">Lainnya</option>
                        </select>
                    </div>
                </div>
    
                <div class="form-group-sm">
                    <label>Pengaduan <span class="req">*</span></label>
                    <textarea id="popPesan" rows="3" placeholder="Tulis aduan Anda..." required></textarea>
                </div>
    
                <div class="form-group-sm">
                    <label>Lampiran Bukti</label>
                    
                    <input type="file" id="popFile" accept="image/*,.pdf" hidden>
                    
                    <label for="popFile" class="custom-file-area">
                        <div class="file-content">
                            <i class="fa-solid fa-cloud-arrow-up"></i>
                            <span id="fileNameDisplay">Klik untuk unggah foto/PDF</span>
                        </div>
                    </label>
                    <small style="color:#888; font-size:0.7rem;">Maksimal ukuran 2MB</small>
                </div>
    
                <button type="submit" class="btn-submit-popup">
                    <i class="fa-regular fa-paper-plane"></i> Kirim
                </button>
            </form>
        </div>
    </main>

    <footer class="footer">
        <div class="footer-container">
    
            <!-- Kolom 1 -->
            <div class="footer-col-1">
                <img src="../foto/logo_desa.png" alt="Logo Kabupaten Bandung Barat" class="footer-logo">
                <p><strong>Pemerintah Desa Gununghalu</strong> <br>                        Gununghalu <br>
                        Kec. Gununghalu <br>
                        Kabupaten Bandung Barat <br>
                        Jawa Barat, 40565 <br>
                    <strong>Kode Wilayah:</strong> 32.17.15.2002</p>
            </div>
    
            <!-- Kolom 2 -->
            <div class="footer-col">
                <h3>Hubungi Kami</h3>
                <p><i class="fas fa-phone"></i> (022) 6950180</p>
                <p><i class="fas fa-envelope"></i> </p>
            </div>
    
            <!-- Kolom 3 -->
            <div class="footer-col">
                <h3>Media Sosial</h3>
                <div class="social-icons">
                    <a href="https://www.instagram.com/desagununghalu?utm_source=ig_web_button_share_sheet&igsh=ZDNlZDc0MzIxNw=="><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-facebook"></i></a>
                    <a href="#"><i class="fab fa-x-twitter"></i></a>
                    <a href="#"><i class="fab fa-youtube"></i></a>
                    <a href="https://www.tiktok.com/@desagununghalu"><i class="fab fa-tiktok"></i></a>
                </div>
            </div>    
        </div>
    
        <div class="footer-bottom">
            Â© 2026 Powered by Gemasains
        </div>
    </footer>

    <script>
        const toggleBtn = document.querySelector('.toggle_btn')
        const toggleBtnIcon = document.querySelector('.toggle_btn i')
        const dropMenu = document.querySelector('.drop_menu')

        toggleBtn.onclick = function () {
            dropMenu.classList.toggle('open')
            const isOpen = dropMenu.classList.contains('open')

            toggleBtnIcon.classList = isOpen
            ? 'fa-solid fa-xmark'
            : 'fa-solid fa-bars'
        }

        // PENGADUAN
        // 1. Toggle Buka/Tutup Popup
        function togglePengaduan() {
            const popup = document.getElementById('popupPengaduan');
            popup.classList.toggle('active');
        }

        // 2. Logic Handle Tampilan File Upload
        const fileInput = document.getElementById('popFile');
        const fileLabel = document.querySelector('.custom-file-area');
        const fileNameDisplay = document.getElementById('fileNameDisplay');
        const iconDisplay = document.querySelector('.file-content i');

        fileInput.addEventListener('change', function() {
            if (this.files && this.files.length > 0) {
                // Jika ada file dipilih
                const name = this.files[0].name;
                
                // Ubah Tampilan
                fileNameDisplay.textContent = name; // Tampilkan nama file
                fileLabel.classList.add('has-file'); // Ganti warna border jadi hijau
                iconDisplay.className = "fa-solid fa-check-circle"; // Ganti ikon jadi centang
            } else {
                // Jika batal pilih
                fileNameDisplay.textContent = "Klik untuk unggah foto/PDF";
                fileLabel.classList.remove('has-file');
                iconDisplay.className = "fa-solid fa-cloud-arrow-up";
            }
        });

        // 3. Logic Submit Form (Persiapan ke Admin)
        document.getElementById('formFloating').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Ambil Data Input
            const nama = document.getElementById('popNama').value;
            const wa = document.getElementById('popWa').value;
            const kat = document.getElementById('popKategori').value;
            const pesan = document.getElementById('popPesan').value;
            const file = document.getElementById('popFile').files[0]; // Ambil Objek File Asli

            // --- PERSIAPAN UNTUK DIKIRIM KE ADMIN (BACKEND) ---
            // Nanti saat ada backend, kita pakai FormData
            const formData = new FormData();
            formData.append('nama', nama);
            formData.append('whatsapp', wa);
            formData.append('kategori', kat);
            formData.append('pesan', pesan);
            if (file) {
                formData.append('lampiran', file);
            }

            // SIMULASI (Karena Backend belum ada)
            console.log("Data Siap Dikirim ke Admin:", {
                nama: nama,
                wa: wa,
                kategori: kat,
                file: file ? file.name : "Tidak ada file"
            });

            // SEMENTARA: Tetap arahkan ke WA sebagai notifikasi
            // (File tidak bisa ikut ke WA, tapi user Admin tau ada laporan masuk)
            alert("Laporan berhasil dibuat! Data file sudah siap diproses sistem (Simulasi). Sekarang akan diarahkan ke WA untuk notifikasi cepat.");
            
            const nomorAdmin = "6281234567890"; 
            const textWA = `*NOTIFIKASI LAPORAN BARU*%0A` +
                           `User: ${nama}%0A` +
                           `Kategori: ${kat}%0A` +
                           `Pesan: ${pesan}%0A` +
                           `(File lampiran tersimpan di Dashboard Admin)`;

            window.open(`https://wa.me/${nomorAdmin}?text=${textWA}`, '_blank');
            
            // Reset Form & Tutup
            document.getElementById('formFloating').reset();
            togglePengaduan();
        });
    </script>
</body>
</html>