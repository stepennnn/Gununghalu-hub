<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css" integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="../css/statistik.css">
    <title>Website Resmi Desa Gununghalu</title>
</head>
<body>
    <nav>
        <div class="navbar">
            <div class="logo">
                <img src="../foto/logo_desa.png" alt="logo kabupaten bandung barat">
                <div class="title">
                    <h1>Desa Gununghalu</h1>
                    <p>Kabupaten Bandung Barat</p>    
                </div>
            </div>
            <ul class="links">
                <li class="nav-links"><a href="index.html">Beranda</a></li>
                <li class="nav-links"><a href="profil.html">Profil Desa</a></li>
                <li class="nav-links"><a href="berita.html">Berita</a></li>
                <li class="nav-links"><a href="potensi.html">Potensi</a></li>
                <li class="nav-links active"><a href="statistik.html">Statistik</a></li>
                <li class="nav-links"><a href="umkm.html">UMKM</a></li>
            </ul>
            <div class="toggle_btn">
                <i class="fa-solid fa-bars"></i>
            </div>
        </div>

        <div class="drop_menu">
            <li><a href="index.html">Beranda</a></li>
            <li><a href="profil.html">Profil Desa</a></li>
            <li><a href="berita.html">Berita</a></li>
            <li><a href="potensi.html">Potensi</a></li>
            <li><a href="statistik.html">Statistik</a></li>
            <li><a href="umkm.html">UMKM</a></li>
        </div>
    </nav>

    <header class="header">
        <div class="header_content">
            <h1>Statistik Desa</h1>
            <p>Menyajikan data menyeluruh tentang statistik penduduk di suatu wilayah, mencakup jumlah penduduk, struktur usia, jenis kelamin, tingkat pendidikan, mata pencaharian, agama, serta berbagai aspek penting lainnya yang menggambarkan komposisi populasi secara detail</p>
        </div>
    </header>

    <main class="statistik">
        <div class="dashboard-full">
    
            <div class="row-cards">
                <div class="card summary-card">
                    <div class="card-icon icon-blue"><i class="fa-solid fa-users"></i></div>
                    <div class="card-text">
                        <p>Total Penduduk</p>
                        <h3>12,345</h3>
                    </div>
                </div>
                <div class="card summary-card">
                    <div class="card-icon icon-green"><i class="fa-solid fa-door-open"></i></div>
                    <div class="card-text">
                        <p>Kepala Keluarga</p>
                        <h3>3,456</h3>
                    </div>
                </div>
                <div class="card summary-card">
                    <div class="card-icon icon-purple"><i class="fa-solid fa-child-reaching"></i></div>
                    <div class="card-text">
                        <p>Wajib KTP</p>
                        <h3>8,910</h3>
                    </div>
                </div>
                <div class="card summary-card">
                    <div class="card-icon icon-orange"><i class="fa-solid fa-hands-holding-circle"></i></div>
                    <div class="card-text">
                        <p>Penerima Bantuan</p>
                        <h3>1,250</h3>
                    </div>
                </div>
            </div>
        
            <div class="row-charts">
                <div class="card chart-container">
                    <div class="card-header">
                        <h4><i class="fa-solid fa-chart-pie"></i> Komposisi Gender</h4>
                    </div>
                    <div class="canvas-wrapper">
                        <canvas id="genderChart"></canvas>
                    </div>
                </div>
                <div class="card chart-container">
                    <div class="card-header">
                        <h4><i class="fa-solid fa-chart-simple"></i> Kelompok Usia</h4>
                    </div>
                    <div class="canvas-wrapper">
                        <canvas id="ageChart"></canvas>
                    </div>
                </div>
            </div>

            <div class="row-secondary-charts">
        
                <div class="card chart-container">
                    <div class="card-header">
                        <h4><i class="fa-solid fa-user-graduate"></i> Tingkat Pendidikan</h4>
                    </div>
                    <div class="canvas-wrapper">
                        <canvas id="eduChart"></canvas>
                    </div>
                </div>
        
                <div class="card chart-container">
                    <div class="card-header">
                        <h4><i class="fa-solid fa-person-praying"></i> Penganut Agama</h4>
                    </div>
                    <div class="canvas-wrapper">
                        <canvas id="religionChart"></canvas>
                    </div>
                </div>
        
            </div>
        
            <div class="row-details">
                <div class="card detail-list">
                    <div class="card-header">
                        <h4><i class="fa-solid fa-briefcase"></i> Data Pekerjaan Utama</h4>
                    </div>
                    
                    <div class="stat-item">
                        <div class="stat-label">
                            <span>Petani & Buruh Tani</span>
                            <span>45%</span>
                        </div>
                        <div class="progress-track">
                            <div class="progress-bar" style="width: 45%; background: #27ae60;"></div>
                        </div>
                    </div>
        
                    <div class="stat-item">
                        <div class="stat-label">
                            <span>Wiraswasta / UMKM</span>
                            <span>25%</span>
                        </div>
                        <div class="progress-track">
                            <div class="progress-bar" style="width: 25%; background: #f39c12;"></div>
                        </div>
                    </div>
        
                    <div class="stat-item">
                        <div class="stat-label">
                            <span>Karyawan Swasta</span>
                            <span>20%</span>
                        </div>
                        <div class="progress-track">
                            <div class="progress-bar" style="width: 20%; background: #2980b9;"></div>
                        </div>
                    </div>
                    
                    <div class="stat-item">
                        <div class="stat-label">
                            <span>PNS / TNI / Polri</span>
                            <span>10%</span>
                        </div>
                        <div class="progress-track">
                            <div class="progress-bar" style="width: 10%; background: #8e44ad;"></div>
                        </div>
                    </div>
                </div>
        
                <div class="card detail-table">
                    <div class="card-header">
                        <h4><i class="fa-solid fa-map-location-dot"></i> Sebaran Penduduk per Dusun</h4>
                    </div>
                    <div class="table-responsive">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>No</th>
                                    <th>Nama Wilayah</th>
                                    <th>KK</th>
                                    <th>L</th>
                                    <th>P</th>
                                    <th>Total</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>1</td>
                                    <td>Dusun 1</td>
                                    <td>450</td>
                                    <td>900</td>
                                    <td>920</td>
                                    <td>1,820</td>
                                </tr>
                                <tr>
                                    <td>2</td>
                                    <td>Dusun 2</td>
                                    <td>320</td>
                                    <td>600</td>
                                    <td>580</td>
                                    <td>1,180</td>
                                </tr>
                                <tr>
                                    <td>3</td>
                                    <td>Dusun 3</td>
                                    <td>510</td>
                                    <td>1,050</td>
                                    <td>1,100</td>
                                    <td>2,150</td>
                                </tr>
                                 <tr>
                                    <td>4</td>
                                    <td>Dusun 4</td>
                                    <td>280</td>
                                    <td>450</td>
                                    <td>480</td>
                                    <td>930</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script>
            // Chart Gender (Doughnut)
            const ctxGender = document.getElementById('genderChart').getContext('2d');
            new Chart(ctxGender, {
                type: 'doughnut',
                data: {
                    labels: ['Laki-laki', 'Perempuan'],
                    datasets: [{
                        data: [6315, 6030],
                        backgroundColor: ['#3498db', '#e91e63'],
                        borderWidth: 0
                    }]
                },
                options: { responsive: true, maintainAspectRatio: false }
            });
        
            // Chart Usia (Bar)
            const ctxAge = document.getElementById('ageChart').getContext('2d');
            new Chart(ctxAge, {
                type: 'bar',
                data: {
                    labels: ['Balita', 'Anak', 'Remaja', 'Dewasa', 'Lansia'],
                    datasets: [{
                        label: 'Jumlah Jiwa',
                        data: [800, 2500, 2000, 5000, 1150],
                        backgroundColor: '#2ecc71',
                        borderRadius: 4
                    }]
                },
                options: { 
                    responsive: true, 
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } }
                }
            });

            // --- Chart Pendidikan (Horizontal Bar) ---
    const ctxEdu = document.getElementById('eduChart').getContext('2d');
    new Chart(ctxEdu, {
        type: 'bar',
        data: {
            labels: [
                'Tidak/Belum Sekolah', 
                'Belum Tamat SD', 
                'Tamat SD/Sederajat', 
                'SLTP/Sederajat', 
                'SLTA/Sederajat', 
                'Diploma/Sarjana'
            ],
            datasets: [{
                label: 'Jumlah Penduduk',
                data: [800, 1200, 3500, 2800, 3100, 1050],
                backgroundColor: [
                    '#95a5a6', 
                    '#e74c3c', 
                    '#e67e22', 
                    '#f1c40f', 
                    '#3498db', 
                    '#9b59b6'  
                ],
                borderRadius: 4
            }]
        },
        options: {
            indexAxis: 'y', 
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: { display: false } 
            }
        }
    });

    // --- Chart Agama (Pie/Doughnut) ---
    const ctxRel = document.getElementById('religionChart').getContext('2d');
    new Chart(ctxRel, {
        type: 'pie',
        data: {
            labels: ['Islam', 'Kristen', 'Katolik', 'Hindu', 'Budha', 'Lainnya'],
            datasets: [{
                data: [12100, 150, 100, 50, 30, 20], 
                backgroundColor: [
                    '#27ae60', 
                    '#2980b9', 
                    '#8e44ad',
                    '#f39c12',
                    '#c0392b',
                    '#7f8c8d'
                ],
                borderWidth: 1
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    position: 'bottom', 
                    labels: { boxWidth: 12, padding: 20 }
                }
            }
        }
    });
        </script>

        <!-- PENGADUAN -->
        <div class="floating-area">
            <button class="pengaduan-btn" onclick="togglePengaduan()">
                <i class="fa-solid fa-headset"></i> Pengaduan
            </button>
        </div>
    
        <div id="popupPengaduan" class="popup-card">
            <div class="popup-header">
                <h3>Form Pengaduan</h3>
                <span class="close-popup" onclick="togglePengaduan()">&times;</span>
            </div>
            
            <form id="formFloating">
                <div class="form-group-sm">
                    <label>Nama <span class="req">*</span></label>
                    <input type="text" id="popNama" placeholder="Masukkan nama Anda" required>
                </div>
    
                <div class="form-group-sm">
                    <label>Nomor Telepon/WA <span class="req">*</span></label>
                    <input type="number" id="popWa" placeholder="Nomor WA aktif" required>
                </div>
    
                <div class="form-group-sm">
                    <label>Kategori <span class="req">*</span></label>
                    <div class="select-wrap-sm">
                        <select id="popKategori" required>
                            <option value="" disabled selected>Pilih kategori...</option>
                            <option value="Administrasi">Administrasi</option>
                            <option value="Infrastruktur">Infrastruktur</option>
                            <option value="Keamanan">Keamanan</option>
                            <option value="Lainnya">Lainnya</option>
                        </select>
                    </div>
                </div>
    
                <div class="form-group-sm">
                    <label>Pengaduan <span class="req">*</span></label>
                    <textarea id="popPesan" rows="3" placeholder="Tulis aduan Anda..." required></textarea>
                </div>
    
                <div class="form-group-sm">
                    <label>Lampiran Bukti</label>
                    
                    <input type="file" id="popFile" accept="image/*,.pdf" hidden>
                    
                    <label for="popFile" class="custom-file-area">
                        <div class="file-content">
                            <i class="fa-solid fa-cloud-arrow-up"></i>
                            <span id="fileNameDisplay">Klik untuk unggah foto/PDF</span>
                        </div>
                    </label>
                    <small style="color:#888; font-size:0.7rem;">Maksimal ukuran 2MB</small>
                </div>
    
                <button type="submit" class="btn-submit-popup">
                    <i class="fa-regular fa-paper-plane"></i> Kirim
                </button>
            </form>
        </div>
    </main>

    <footer class="footer">
        <div class="footer-container">
    
            <!-- Kolom 1 -->
            <div class="footer-col-1">
                <img src="../foto/logo_desa.png" alt="Logo Kabupaten Bandung Barat" class="footer-logo">
                <p><strong>Pemerintah Desa Gununghalu</strong> <br>                        Gununghalu <br>
                        Kec. Gununghalu <br>
                        Kabupaten Bandung Barat <br>
                        Jawa Barat, 40565 <br>
                    <strong>Kode Wilayah:</strong> 32.17.15.2002</p>
            </div>
    
            <!-- Kolom 2 -->
            <div class="footer-col">
                <h3>Hubungi Kami</h3>
                <p><i class="fas fa-phone"></i> (022) 6950180</p>
                <p><i class="fas fa-envelope"></i> </p>
            </div>
    
            <!-- Kolom 3 -->
            <div class="footer-col">
                <h3>Media Sosial</h3>
                <div class="social-icons">
                    <a href="https://www.instagram.com/desagununghalu?utm_source=ig_web_button_share_sheet&igsh=ZDNlZDc0MzIxNw=="><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-facebook"></i></a>
                    <a href="#"><i class="fab fa-x-twitter"></i></a>
                    <a href="#"><i class="fab fa-youtube"></i></a>
                    <a href="https://www.tiktok.com/@desagununghalu"><i class="fab fa-tiktok"></i></a>
                </div>
            </div>    
        </div>
    
        <div class="footer-bottom">
            Â© 2026 Powered by Gemasains
        </div>
    </footer>

    <script>
        const toggleBtn = document.querySelector('.toggle_btn')
        const toggleBtnIcon = document.querySelector('.toggle_btn i')
        const dropMenu = document.querySelector('.drop_menu')

        toggleBtn.onclick = function () {
            dropMenu.classList.toggle('open')
            const isOpen = dropMenu.classList.contains('open')

            toggleBtnIcon.classList = isOpen
            ? 'fa-solid fa-xmark'
            : 'fa-solid fa-bars'
        }

        // PENGADUAN
        // 1. Toggle Buka/Tutup Popup
        function togglePengaduan() {
            const popup = document.getElementById('popupPengaduan');
            popup.classList.toggle('active');
        }

        // 2. Logic Handle Tampilan File Upload
        const fileInput = document.getElementById('popFile');
        const fileLabel = document.querySelector('.custom-file-area');
        const fileNameDisplay = document.getElementById('fileNameDisplay');
        const iconDisplay = document.querySelector('.file-content i');

        fileInput.addEventListener('change', function() {
            if (this.files && this.files.length > 0) {
                // Jika ada file dipilih
                const name = this.files[0].name;
                
                // Ubah Tampilan
                fileNameDisplay.textContent = name; // Tampilkan nama file
                fileLabel.classList.add('has-file'); // Ganti warna border jadi hijau
                iconDisplay.className = "fa-solid fa-check-circle"; // Ganti ikon jadi centang
            } else {
                // Jika batal pilih
                fileNameDisplay.textContent = "Klik untuk unggah foto/PDF";
                fileLabel.classList.remove('has-file');
                iconDisplay.className = "fa-solid fa-cloud-arrow-up";
            }
        });

        // 3. Logic Submit Form (Persiapan ke Admin)
        document.getElementById('formFloating').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Ambil Data Input
            const nama = document.getElementById('popNama').value;
            const wa = document.getElementById('popWa').value;
            const kat = document.getElementById('popKategori').value;
            const pesan = document.getElementById('popPesan').value;
            const file = document.getElementById('popFile').files[0]; // Ambil Objek File Asli

            // --- PERSIAPAN UNTUK DIKIRIM KE ADMIN (BACKEND) ---
            // Nanti saat ada backend, kita pakai FormData
            const formData = new FormData();
            formData.append('nama', nama);
            formData.append('whatsapp', wa);
            formData.append('kategori', kat);
            formData.append('pesan', pesan);
            if (file) {
                formData.append('lampiran', file);
            }

            // SIMULASI (Karena Backend belum ada)
            console.log("Data Siap Dikirim ke Admin:", {
                nama: nama,
                wa: wa,
                kategori: kat,
                file: file ? file.name : "Tidak ada file"
            });

            // SEMENTARA: Tetap arahkan ke WA sebagai notifikasi
            // (File tidak bisa ikut ke WA, tapi user Admin tau ada laporan masuk)
            alert("Laporan berhasil dibuat! Data file sudah siap diproses sistem (Simulasi). Sekarang akan diarahkan ke WA untuk notifikasi cepat.");
            
            const nomorAdmin = "6281234567890"; 
            const textWA = `*NOTIFIKASI LAPORAN BARU*%0A` +
                           `User: ${nama}%0A` +
                           `Kategori: ${kat}%0A` +
                           `Pesan: ${pesan}%0A` +
                           `(File lampiran tersimpan di Dashboard Admin)`;

            window.open(`https://wa.me/${nomorAdmin}?text=${textWA}`, '_blank');
            
            // Reset Form & Tutup
            document.getElementById('formFloating').reset();
            togglePengaduan();
        });
    </script>
</body>
</html>